<!-- MANAGE JENKINS SLAVE NODES -->
<div class="jumbotron">
  <div class="btn btn-default btn-block" rv-on-click="jenkinsState.setJenkinsSlavePanel" id="jenkinsSlaveButton">
    <h2 class="text-center">Manage Jenkins Slave Nodes</h2>
  </div>

  <div id="jenkinsSlavePanel" class="jumbotron-button-content" rv-show="jenkinsState.jenkinsSlavePanel">

    <!--List / Install / Remove software on a given build server START-->
    <div class="jumbotron embedded-panel">
      <div class="btn btn-default btn-block" rv-on-click="jenkinsState.setManageSingleSlavePanel" id="manageSingleSlaveButton">
        <h2 class="text-center">List / Install / Remove software on a given build server</h2>
      </div>

      <div id="manageSingleSlavePanel" class="jumbotron-button-content" rv-show="jenkinsState.manageSingleSlavePanel">
        <!-- Build server selector, package input box-->
        <div class="row">
          <div class="col-lg-8">
            <input type="text"
              class="form-control"
              placeholder="(e.g. firefox)"
              id="packageFilter_Single"/>
          </div>

          <div class="col-lg-4">
            <span>
              <select id="singleJenkinsBuildServers" size="2" rv-on-change="jenkinsState.changeBuildServer"><!-- Adding the size attribute with a value > 1 ensures that none of the options are selected by default.-->
                <option rv-each-nodelabel="jenkinsState.nodeLabels" rv-value="nodelabel">{ nodelabel }</option>
              </select>
            </span>
            <a rv-on-click="jenkinsState.listPackageForSingleSlave">
              <button type="button" class="btn btn-primary">
                List
               </button>
            </a>
          </div>
        </div>
        <br/>

        {% include "tabs/monitoring-tab/loading.html" %}

        <div rv-show="jenkinsState.singleSlavePackageTableReady">
          <div class="alert alert-success">
            <div>Actions taken on the list below apply only to the chosen build server.  The managed package list is not updated. In this way you may customize the runtime environment of a given build server to facilitate a specific porting effort. Select the package and then the action to be taken.</div>
          </div>
          <div id="singleServerPackageListToolbar" class="btn-group">
              <a rv-show="jenkinsState.selectedSingleSlavePackage.updateAvailable" rv-on-click="jenkinsState.installPackageForSingleSlave">
                <button type="button" class="btn btn-primary">
                  Install / Update
                </button>
              </a> 
              <a rv-show="jenkinsState.selectedSingleSlavePackage.packageInstalled" rv-on-click="jenkinsState.removePackageForSingleSlave">
                <button type="button" class="btn btn-primary">
                  Remove
                </button>
              </a>
              <a rv-show="jenkinsState.showUnselectPackageButton" rv-on-click="jenkinsState.unselectPackageForSingleSlave" >
                <button type="button" class="btn btn-primary">
                  Unselect
                </button>
              </a>
          </div>

          <!-- START SINGLE SERVER PACKAGE LIST TABLE -->
          <table class="table panel panel-default" id="singleServerPackageListTable" data-pagination="true" data-click-to-select="true"data-toolbar="#singleServerPackageListToolbar">
            <thead>
              <tr>
                <th data-field="state" data-radio="true"></th>
                <th data-field="packageName" data-sortable="true">Package</th>
                <th data-field="installedVersion" data-sortable="true">Installed Version</th>
                <th data-field="updateVersion" data-sortable="true">Latest Version</th>
                <th data-field="updateAvailable" data-sortable="true" data-formatter="updatableFormatter">Updatable</th>
                <th data-field="summary" data-sortable="true">Package Summary</th>
              </tr>
            </thead>
          </table>
          <!-- END SINGLE SERVER PACKAGE LIST TABLE -->
        </div>

        {% include "tabs/monitoring-tab/packageloading.html" %}

      </div>
     </div>
    <!--List / Install / Remove software on a given build server END-->

    <!--List / Install / Remove software across build servers START-->
    <div class="jumbotron embedded-panel">
      <div class="btn btn-default btn-block" rv-on-click="jenkinsState.setManageMultipleSlavePanel" id="manageMultipleSlaveButton">
        <h2 class="text-center">List / Install / Remove software across build servers</h2>
      </div>

      <div id="manageMultipleSlavePanel" class="jumbotron-button-content" rv-show="jenkinsState.manageMultipleSlavePanel">
        <div class="row">
          <div class="col-lg-8">
            <input type="text"
              class="form-control"
              placeholder="(e.g. redis, cassandra, mongo)"
              id="packageFilter_Multiple"/>
          </div>

          <div class="col-lg-4">
            <a>
              <button id="mlRHEL" type="button" class="btn btn-primary" rv-on-click="jenkinsState.listManagedPackages">
                List RHEL
              </button>
            </a>
            <a>
              <button id="mlUbuntu" type="button" class="btn btn-primary" rv-on-click="jenkinsState.listManagedPackages">
                List Ubuntu
              </button>
            </a>
            <a>
              <button id="mlAll" type="button" class="btn btn-primary" rv-on-click="jenkinsState.listManagedPackages">
                List All
              </button>
            </a>
          </div>
        </div>
        <br/>

        {% include "tabs/monitoring-tab/managed-packages-loading.html" %}

        <div rv-show="jenkinsState.managedPackageTableReady">
          <div class="alert alert-success">
            <a class="buttonRight">
              <button type="button" class="btn btn-primary" rv-on-click="jenkinsState.synchManagedPackageList">
                Synch
              </button>
            </a>
            <div><u>Add</u> and <u>Remove</u> packages to the managed package list shown below.<br>Then, <u>Synch</u>ronize the list with build servers which will perform installs and un-installs.</div>

          </div>
          <br/>
          <br/>
          <!-- START MULTIPLE SERVER PACKAGE LIST TABLE -->

          <table class="table panel panel-default">
            <thead>
              <tr>
                <th>Package</th>
                <th>Platform</th>
                <th>Managed Version</th>
                <th>Latest Version</th>
                <th>User Added Version</th>
                <th>Distribution</th>
                <th>O/S Version</th>
                <th>Managed List Actions</th>
              </tr>
            </thead>
            <tbody rv-each-package="jenkinsState.managedPackageList">
              <tr class="result-row">
                <td>
                  { package.packageName }
                </td>
                <td>
                  { package.arch }
                </td>
                <td>
                  { package.managedPackageVersion }
                </td>
                <td>
                  { package.updateVersion }
                </td>
                <td>
                  { package.userAddedVersion }
                </td>
                <td>
                  { package.distro }
                </td>
                <td>
                  { package.osversion }
                </td>
                <td>
                  <a rv-if="package.showAddButton" rv-on-click="jenkinsState.addToManagedList">
                    <button type="button" class="btn btn-primary">
                      Add
                    </button>
                  </a>
                  <a rv-if="package.showRemoveButton" rv-on-click="jenkinsState.removeFromManagedList">
                    <button type="button" class="btn btn-primary">
                      Remove
                    </button>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
          <!-- END MULTIPLE SERVER PACKAGE LIST TABLE -->
        </div>
      </div>
    </div>
    <!--List / Install / Remove software across build servers END-->
  </div>
</div>
